                     --\\ Valvula //--
                        Blue Shield
                           1.0.4

Advanced Software Production Line is proud to announce a new stable
release of the Valvula.

Valvula is a OpenSource high performance mail policy daemon for
Postfix, written in ANSI C, that provides out of the box support for
sender login mismatch, mail quotas, per user and per domain blacklists
and white-lists and much more.

Valvula is fully extensible through plugins and it is composed by a
base library (libValvula) that integrates into a ready to use server
(valvulad) that is able to run different ports with different modules
so you can connect same valvula process at different points inside
Postfix policy restriction sections.


Resources
~~~~~~~~~

   Valvula homepage
   [ http://www.aspl.es/valvula ]

   Commercial support
   [ http://www.aspl.es/valvula/commercial.html ]

   Advanced Software Production Line, S.L.
   [ http://www.aspl.es ]

   Featured project: Core-Admin
   [ http://www.core-admin.com ]

This release in short
~~~~~~~~~~~~~~~~~~~~~

  - Several issues where fixed around changing running user and its
  compatibility with reading postfix configuration files.

  - Fixed mod-bwl that was failing in some cases due to an memory
    allocation problem.

  - Fixed mod-mquota, it wasn't rotating user quotas properly in some
    cases.

  - Making mod-ticket to report quota consumption using day before (to
    better match period used).

  - Updated mod-slm to allow adding rules without mail from (or empty
    mail from).

  - Added support to ping local server to check if it is alive and
    processing.


Changes from previous release
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* [fix] Making valvula user execution change to be the last part of
  the run time configuration after start up. This solves issues where
  daemon try to read postfix configuration while running valvula with
  a user with lower permissions.

* [fix] Updated mod-mquota to better report when a sending mquota is reached
  why it was reached.

* [fix] Updated valvula to make mod-ticket to change day before
  continue to avoid middle changes during the test..

* [fix] Updated mod-mquota to fix internal problem causing account
  flushing handler not being called.

* [fix] Making mod-slm to also support white-listing a sasl user
  account without requiring a mail from.

* [fix] Updated mod-slm to allow by default not blocking mail from: <>
  requests when they are generated by sasl users. Updated regression
  test to check this new code and to also check that they are rejected
  when configured that way.

* [fix] Making valvula to record quota usage, at mod-ticket, to refer
  to the previous month and previous day.

* [fix] making valvula to report rcpt count on DUNNO line.

* [fix] Fixed formatting problem on reject messages.

* [fix] Making mod-ticket to use recipient count declaration so it can
  be used at smtpd_sender_restrictions and smtpd_data_restrictions.

* [fix] Updated reg test (test_02) to remove table_02_test before
  starting.

* [fix] Added initial code to record what requests are in place and
  what handlers are being checked.

* [fix] Several updates to make valvula server to be able to fully
  restart on wrong signal received. During the process, now the server
  will report what were the requests that were handled at the moment
  the signal was received.

* [fix] Fixed mod-mquota rotation problem. Updated test_07 to check
  period selection.

* [fix] Updated valvulad command line to allow calling to test local
  server to ensure it is working. This is going to be used as a base
  result to implement local valvula checking..

* [fix] Fixed configuration load error handling at valvulad (ping
  request).

* [fix] Added valvulad check script that uses valvulad -p option to
  check valvula service and recover it in case of failure.

* [fix] Updated building process to include references to install new
  valvula check script and automated cron.

* [fix] Updated valvula building process to include new check
  scripts..

* [fix] Updated server API to include a new db function to run a query
  when it is fully formatted a already prepared. API added:

   - valvulad_db_run_query_s

* [fix] Updated mod-bwl to use previous API to avoid allocation
  problems.

* [fix] Updated building process to make valvula restart to not send a
  fail signal to post inst inside debian install..

* [fix] updated valvula client ping code to detect timeouts in
  different steps.

* [fix] Updated check-valvulad.py to avoid using
  commands.getstatusoutput ...  what a poor command shell
  implementation. Replaced by os.system.

* [fix] Updated default server configuration to include default values
  to mail quota.

* [fix] Several modifications to prepare new mod-mw.c module (a module
  to implement custom mysql sentences as requests are received).

About Advanced Software Production Line, S.L. (ASPL)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

  Advanced Software Production Line (ASPL) provides GNU/Linux support
  and consulting services to enable organisation to introduce
  GNU/Linux into their processes, making other platforms to properly
  interact with it.

  You can contact us, using English or Spanish, at:

       http://www.aspl.es - info@aspl.es

  We hope Valvula may be useful you. Enjoy Valvula!

--
Francis Brosnan Bl√°zquez           - francis@aspl.es
Advanced Software Production Line  - http://www.aspl.es
28th Jul 2014, Madrid (Spain)


